<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
xmlns:h="http://java.sun.com/jsf/html"
xmlns:f="http://java.sun.com/jsf/core"
xmlns:ui="http://java.sun.com/jsf/facelets">



<h:head>
<meta name="viewport" content="width=device-width"/>
<link href="css/bootstrap.min.css" rel="stylesheet"/>
<link href="css/style.css" rel="stylesheet"/>
<script src="js/jquery.js"></script>
<script src="js/bootstrap.min.js"></script>
<script src="js/core.min.js"></script>


<title>Add a User</title>
</h:head>
<ui:fragment rendered="#{not identity.loggedIn}">
		    <ui:include src="connexion.xhtml" /> 
	    </ui:fragment>
<h:body id="plateformBody" rendered="#{identity.loggedIn}">
 <ui:include src="header.xhtml" /> 
  <!-- end: Header -->
  
<div class="container">
    <div class="row">
        
      <!-- start: Main Menu -->
      <div id="sidebar-left" class="col-lg-2 col-sm-1">
        
        
	  <ui:include src="leftMenu.xhtml" />
      </div>
      <!-- end: Main Menu -->
            
      <!-- start: Content -->
      <div id="content" class="col-lg-10 col-sm-11">
        <!-- Main container : c'est ici que les widgets et graphs seront affichés--> 
      <div class="row"> 
        <div class="col-lg-12">
          <button type="button" class="btn btn-success btn-setting" data-toggle="modal" >New Suscription </button><br/><br/>
          <div class="box">
            <div class="box-header">
              <h2><i class="fa fa-clone"></i>My Suscriptions </h2>
            </div>
            <div class="box-content">
            
            <!-- CONTROLLEUR À AJOUTER (5/01/16 -->           
            <h:dataTable styleClass="table table-striped table-hover" value="#{suscriptionController.getSuscriptionsUser(identity.account.loginName)}" var="item">
					<h:column>	
						<f:facet name="header">Nom du capteur</f:facet>
						<h:graphicImage styleClass="iconList" value="img/drone.png" />
					</h:column>
					<h:column>
						<f:facet name="header">Associated Drone Id</f:facet>
						<h:outputText value="#{item.drone.id}" />
					</h:column>
					<h:column>
						<f:facet name="header">Localisation</f:facet>
						<h:outputText value="#{item.drone.city}" />
					</h:column>
					<h:column>
						<f:facet name="header">Suscription Beginning</f:facet>
						<h:outputText value="#{item.inServiceDate}" />
					</h:column>
					<h:column>
						<f:facet name="header">Status</f:facet>
						<h:outputText value="#{item.drone.status}" />
					</h:column>
					<h:column>
						<f:facet name="header">Sensor</f:facet>
						<h:link  outcome="" onclick="">
						<span class="label label-default">Data</span>
						</h:link>
					</h:column>
					

				</h:dataTable>
            </div> 
          </div>  
        </div><!--/col-->
        
      </div>
      </div>
      <!-- end: Content -->
        
      </div><!--/row-->   
    
  </div>
  
<div id="myModal" class="modal fade" role="dialog">
  <div class="modal-dialog">

    <!-- Modal content-->
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">&times;</button>
        <h4 class="modal-title">Nouvel abonnement</h4>
      </div>
      <div class="modal-body">
    <h:form styleClass="form-horizontal">
         <fieldset>
            <legend>Ajout d'abonnement</legend>
                        
            <h:outputLabel for="inServiceDate">Date de début <span class="requis">*</span></h:outputLabel>
            <h:inputText styleClass="form-control input-md" id="inServiceDate" value="#{suscriptionController.dateBegin}" required="true" size="20" maxlength="20" />
            <h:message id="inServiceDateMessage" for="inServiceDate" errorClass="erreur" />
            <br />
            
            <h:outputLabel for="idUser">User_Id <span class="requis">*</span></h:outputLabel>
            <h:inputText styleClass="form-control input-md" id="idUser" value="#{suscriptionController.idUser}" required="true" size="20" maxlength="20" />
            <h:message id="idUserMessage" for="idUser" errorClass="erreur" />
            <br />
            
            <h:outputLabel for="idSensor">Sensor_Id <span class="requis">*</span></h:outputLabel>
            <h:inputText styleClass="form-control input-md" id="idSensor" value="#{suscriptionController.idSensor}" required="true" size="20" maxlength="20" />
            <h:message id="idSensorMessage" for="idSensor" errorClass="erreur" />
            <br />
        
            <h:messages globalOnly="true" infoClass="info" />
    
            <h:commandButton styleClass="btn btn-primary" value="Ajouter"  action="#{suscriptionController.addSuscription()}" />
            <br />
          </fieldset>
        </h:form> 
        </div>
	</div>
  </div>
</div>

  
  <div class="clearfix"></div>
	  <ui:include src="footer.xhtml" />
  
</h:body>


</html>